---
title: 速率限制配置说明
date: 2025-07-07
slug: rate-limiting
tags: [rate-limit, config, blog]
---

# 速率限制配置说明

## 概述

静态服务器已配置速率限制功能，以防止拒绝服务攻击和滥用。

## 配置详情

### 通用速率限制

- **时间窗口**: 15 分钟
- **最大请求数**: 每个 IP 100 个请求
- **适用范围**: 所有路由（静态文件、SPA 路由等）

### API 速率限制

- **时间窗口**: 15 分钟
- **最大请求数**: 每个 IP 50 个请求
- **适用范围**: `/api/*` 路由

## 响应头

当请求被限制时，服务器会返回以下响应头：

```
RateLimit-Limit: 100
RateLimit-Remaining: 0
RateLimit-Reset: 1234567890
Retry-After: 900
```

## 错误响应

当请求超过限制时，服务器返回 429 状态码：

```json
{
  "error": "请求过于频繁，请稍后再试",
  "retryAfter": 15
}
```

## 安全考虑

1. **防止 DoS 攻击**: 限制单个 IP 的请求频率
2. **保护服务器资源**: 防止过度消耗 CPU 和内存
3. **公平使用**: 确保所有用户都能正常访问服务

## 监控建议

建议监控以下指标：

- 429 状态码的数量
- 被限制的 IP 地址
- 请求频率异常的用户

## 调整配置

如需调整限制参数，请修改 `static-server.js` 中的配置：

```javascript
const generalLimiter = rateLimit({
  windowMs: 15 * 60 * 1000, // 时间窗口
  max: 100, // 最大请求数
  // ... 其他配置
});
```
